<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deck Editor - Powell's Bowells</title>
    <link rel="stylesheet" href="../frontend/styles/deck-editor.css">
</head>

<body>
    <header class="header">
        <div class="header-left">
            <button class="header-button">button</button>
            <div class="search-container">
                <input type="text" class="search-input" placeholder="Input text">
            </div>
        </div>
        <div class="header-right">
            <nav class="nav-links">
                <a href="../frontend/landingPage.html">Home</a>
                <a href="../frontend/restaurant-form.html">Add Restaurant</a>
                <a href="../frontend/card-deck.html">Decks</a>
                <a href="#">Contact Us</a>
            </nav>
        </div>
        <button class="change-deck-photo-button">Change Deck Photo</button>
    </header>

    <main class="main-content">
        <div class="deck-title-container">
            <h1 class="deck-title">Deck Title</h1>
        </div>

        <div class="restaurant-grid-wrapper">
            <div class="restaurant-grid">

            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="footer-left">
            <div class="footer-logo">
                <img src="../design/logo.png" alt="logo">
            </div>
            <div class="footer-text">Powell's Bowells</div>
        </div>
        <div class="footer-right">
            <div class="footer-contact-info">
                <a href="mailto:lorem@ipsum.com">lorem@ipsum.com</a>
                <span>xxx-xxx-xxxx</span>
            </div>
            <p>Contact Us</p>
        </div>
    </footer>
    <script src="../frontend/js/deckControllerFrontEnd.js"></script>
    <script src="../frontend/scripts.js"></script>

    <script>
        function getDeckIdFromUrl() {
            const params = new URLSearchParams(window.location.search);
            return params.get("deck");
        }

        function renderDeckEditor() {
            const deckId = getDeckIdFromUrl();
            const deck = getDecks().find(d => d.id === deckId);
            console.log("Deck ID from URL:", deckId);
            console.log("Deck:", deck);
            console.log("Deck.cards:", deck.cards);

            // Update deck title
            document.querySelector(".deck-title").textContent = deck.name;

            // Clear and populate restaurant grid
            const grid = document.querySelector(".restaurant-grid");
            grid.innerHTML = "";

            const allRestaurants = [...(window.defaultStaticRestaurants || []), ...(JSON.parse(localStorage.getItem('restaurantsData')) || [])];

            deck.cards.forEach(cardId => {
                const restaurant = allRestaurants.find(r => r.title === cardId);
                if (!restaurant) return;

                const cardDiv = document.createElement("div");
                cardDiv.className = "restaurant-card";

                cardDiv.innerHTML = `
        <div class="restaurant-card-image">
          <img src="${restaurant.image}" alt="${restaurant.title}">
        </div>
        <div class="restaurant-title">${restaurant.title}</div>
      `;

                grid.appendChild(cardDiv);
            });
        }

        // Run on load
        document.addEventListener("DOMContentLoaded", renderDeckEditor);
    </script>

</body>

</html>